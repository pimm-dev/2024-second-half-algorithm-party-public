<HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <META content="no-cache" http-equiv="pragma">
    <META content="-1" http-equiv="expires">
    <META content="text/html;charset=UTF-8" http-equiv="content-type">
    <LINK href="problem-statement.css" rel="stylesheet" type="text/css">
    <TITLE>도서 검색 프로그램</TITLE>
    <SCRIPT type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {inlineMath: [['$$$','$$$']], displayMath: [['$$$$$$','$$$$$$']]}
        });
        </SCRIPT>
        <SCRIPT async="" src="https://polygon.codeforces.com/lib/MathJax/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript">
    </SCRIPT>
</HEAD><BODY>
    <DIV class="problem-statement"><DIV class="header"><DIV class="title">도서 검색 프로그램</DIV><DIV class="time-limit"><DIV class="property-title">time limit per test</DIV>2 seconds</DIV><DIV class="memory-limit"><DIV class="property-title">memory limit per test</DIV>1024 megabytes</DIV><DIV class="input-file input-standard"><DIV class="property-title">input</DIV>standard input</DIV><DIV class="output-file output-standard"><DIV class="property-title">output</DIV>standard output</DIV></DIV><DIV class="legend"><P>게임개발동아리 PIMM에는 졸업생들이 전공책을 동아리방에 두고 가는 문화가 있다. PIMM에서는 신입 회원들이 전공책을 사용할 수 있도록 도서 대여 시스템을 운영했다. 하지만 민규가 회장직을 맡았던 작년에는 동아리방에 너무 많은 책이 쌓여 도서 대여 시스템을 관리하기 어렵게 되었다. 이 소식을 들은 종현은 필요한 책들을 바로바로 찾을 수 있도록 하는 도서 검색 프로그램 제작을 착수했다.</P><P>종현이 만든 도서 검색 프로그램 DB에는 문자열 <SPAN class="tex-font-style-tt">&lt;book&gt;</SPAN>이 저장된다. <SPAN class="tex-font-style-tt">&lt;book&gt;</SPAN>은 <A href="https://ko.wikipedia.org/wiki/%EB%B0%B0%EC%BB%A4%EC%8A%A4-%EB%82%98%EC%9A%B0%EB%A5%B4_%ED%91%9C%EA%B8%B0%EB%B2%95">배커스-나우르 표기법(BNF)</A>에 따라 다음과 같이 표기될 수 있다.</P><P></P><PRE class="lstlisting"><CODE class="prettyprint">&lt;book&gt; ::= &lt;name&gt; &lt;author&gt; | &lt;name&gt; &lt;author&gt; &lt;tags&gt;<BR>&lt;tags&gt; ::= &lt;tag&gt; | &lt;tag&gt; &lt;tags&gt;<BR><BR>&lt;name&gt; ::= &lt;str&gt;<BR>&lt;author&gt; ::= &lt;str&gt;<BR>&lt;tag&gt; ::= &lt;str&gt;<BR></CODE></PRE><P></P><P></P><UL> <LI> <SPAN class="tex-font-style-tt">&lt;str&gt;</SPAN>은 알파벳 대소문자, 숫자, '-', '_' 로만 이루어진 문자열이다. </LI><LI> <SPAN class="tex-font-style-tt">&lt;name&gt;</SPAN>은 도서의 이름을 의미한다. </LI><LI> <SPAN class="tex-font-style-tt">&lt;author&gt;</SPAN>은 도서의 저자를 의미한다. </LI><LI> <SPAN class="tex-font-style-tt">&lt;tag&gt;</SPAN>는 도서가 가진 특징을 의미한다. </LI><LI> <SPAN class="tex-font-style-tt">&lt;name&gt;</SPAN>, <SPAN class="tex-font-style-tt">&lt;author&gt;</SPAN>, <SPAN class="tex-font-style-tt">&lt;tag&gt;</SPAN>의 최대 길이는 각각 20보다 작거나 같다. </LI></UL><P></P><P>만약 "1984 George_Orwell novel SF"라는 문자열 <SPAN class="tex-font-style-tt">&lt;book&gt;</SPAN>이 DB 안에 있다면, 이것은 이름이 "1984"이고 저자가 "George_Orwell"이며, "novel"과 "SF"라는 두 가지 특징을 지닌 도서가 도서 검색 프로그램 안에 있음을 의미한다.</P><P>DB 안에 <SPAN class="tex-font-style-tt">&lt;name&gt;</SPAN> 과 <SPAN class="tex-font-style-tt">&lt;author&gt;</SPAN> 가 모두 같은 책이 둘 이상 존재할 수 없다. 단, <SPAN class="tex-font-style-tt">&lt;name&gt;</SPAN> 이나 <SPAN class="tex-font-style-tt">&lt;author&gt;</SPAN> 둘 중 하나가 일치하는 책이 DB 안에 여러 권 있을 수 있음에 유의하라.</P><P>도서 검색 프로그램에 주어지는 검색 요청 <SPAN class="tex-font-style-tt">&lt;search&gt;</SPAN> 또한 문자열로 주어진다.</P><P></P><PRE class="lstlisting"><CODE class="prettyprint">&lt;method&gt; ::= &lt;AND&gt; | &lt;OR&gt; | &lt;NOT&gt; | &lt;nameCorrect&gt; | &lt;nameInclude&gt; | &lt;authorCorrect&gt; | &lt;tagCorrect&gt;<BR>&lt;methods&gt; ::= &lt;method&gt; | &lt;method&gt; ", " &lt;methods&gt;<BR><BR>&lt;AND&gt; ::= "A(" &lt;methods&gt; ")"<BR>&lt;OR&gt; ::= "O(" &lt;methods&gt; ")"<BR>&lt;NOT&gt; ::= "N(" &lt;method&gt; ")"<BR>&lt;nameCorrect&gt; ::= "n:" &lt;str&gt;<BR>&lt;nameInclude&gt; ::= "ni:" &lt;str&gt;<BR>&lt;authorCorrect&gt; ::= "a:" &lt;str&gt;<BR>&lt;tagCorrect&gt; ::= "t:" &lt;str&gt;<BR><BR>&lt;search&gt; ::= &lt;methods&gt;<BR></CODE></PRE><P></P><P></P><UL> <LI> <SPAN class="tex-font-style-tt">&lt;nameCorrect&gt;</SPAN> </LI><LI> <SPAN class="tex-font-style-tt">&lt;str&gt;</SPAN>과 주어진 <SPAN class="tex-font-style-tt">&lt;book&gt;</SPAN>의 <SPAN class="tex-font-style-tt">&lt;name&gt;</SPAN>이 일치하면 참을, 그렇지 않다면 거짓을 반환한다.<P></P><P> </P></LI><LI> <SPAN class="tex-font-style-tt">&lt;nameInclude&gt;</SPAN> </LI><LI> <SPAN class="tex-font-style-tt">&lt;str&gt;</SPAN>이 주어진 <SPAN class="tex-font-style-tt">&lt;book&gt;</SPAN>의 문자열 <SPAN class="tex-font-style-tt">&lt;name&gt;</SPAN> 안에 포함되어 있다면 참을, 그렇지 않다면 거짓을 반환한다.<P></P><P> </P></LI><LI> <SPAN class="tex-font-style-tt">&lt;authorCorrect&gt;</SPAN> </LI><LI> <SPAN class="tex-font-style-tt">&lt;str&gt;</SPAN>과 주어진 <SPAN class="tex-font-style-tt">&lt;book&gt;</SPAN>의 <SPAN class="tex-font-style-tt">&lt;author&gt;</SPAN>과 일치하면 참을, 그렇지 않다면 거짓을 반환한다.<P></P><P> </P></LI><LI> <SPAN class="tex-font-style-tt">&lt;tagCorrect&gt;</SPAN> </LI><LI> <SPAN class="tex-font-style-tt">&lt;str&gt;</SPAN>과 주어진 <SPAN class="tex-font-style-tt">&lt;book&gt;</SPAN>의 <SPAN class="tex-font-style-tt">&lt;tags&gt;</SPAN> 안에 일치하는 <SPAN class="tex-font-style-tt">&lt;tag&gt;</SPAN>가 하나라도 있다면 참을, 그렇지 않다면 거짓을 반환한다.<P></P><P> </P></LI><LI> <SPAN class="tex-font-style-tt">&lt;AND&gt;</SPAN> </LI><LI> 주어진 <SPAN class="tex-font-style-tt">&lt;methods&gt;</SPAN> 안의 모든 <SPAN class="tex-font-style-tt">&lt;method&gt;</SPAN>가 참을 반환한다면 참을, 그렇지 않다면 거짓을 반환한다.<P></P><P> </P></LI><LI> <SPAN class="tex-font-style-tt">&lt;OR&gt;</SPAN> </LI><LI> 주어진 <SPAN class="tex-font-style-tt">&lt;methods&gt;</SPAN> 안의 <SPAN class="tex-font-style-tt">&lt;method&gt;</SPAN> 중 하나라도 참을 반환한다면 참을, 그렇지 않다면 거짓을 반환한다.<P></P><P> </P></LI><LI> <SPAN class="tex-font-style-tt">&lt;NOT&gt;</SPAN> </LI><LI> <SPAN class="tex-font-style-tt">&lt;method&gt;</SPAN>가 참을 반환한다면 거짓을, 그렇지 않다면 참을 반환한다.<P></P><P> </P></LI><LI> <SPAN class="tex-font-style-tt">&lt;search&gt;</SPAN> </LI><LI> DB 안의 모든 <SPAN class="tex-font-style-tt">&lt;book&gt;</SPAN>에 대해, 주어진 <SPAN class="tex-font-style-tt">&lt;methods&gt;</SPAN> 안의 모든 <SPAN class="tex-font-style-tt">&lt;method&gt;</SPAN>가 참을 반환하는 <SPAN class="tex-font-style-tt">&lt;book&gt;</SPAN>의 개수를 반환한다.<P></P><P> </P></LI><LI> <SPAN class="tex-font-style-tt">&lt;search&gt;</SPAN> 내에 들어가는 <SPAN class="tex-font-style-tt">&lt;str&gt;</SPAN>의 최대 길이는 20보다 작거나 같다. </LI></UL><P></P><P>여러 개의 책 <SPAN class="tex-font-style-tt">&lt;book&gt;</SPAN>과, 여러 개의 문자열 <SPAN class="tex-font-style-tt">&lt;search&gt;</SPAN>가 주어질 때, 각각의 <SPAN class="tex-font-style-tt">&lt;search&gt;</SPAN>에 대해 반환되는 값을 한 줄에 하나씩 출력하라.</P></DIV><P></P><P></P><DIV class="input-specification"><DIV class="section-title">Input</DIV><P></P><P>입력의 첫째 줄에는 DB 안의 문자열 <SPAN class="tex-font-style-tt">&lt;book&gt;</SPAN>의 개수 $$$N(1&le;N&le;200)$$$이 주어진다. 다음 $$$N$$$개 줄에는 DB 안에 저장된 문자열 <SPAN class="tex-font-style-tt">&lt;book&gt;</SPAN>이 한 줄에 한 개씩 주어진다. 문자열 <SPAN class="tex-font-style-tt">&lt;book&gt;</SPAN>의 길이는 $$$200$$$보다 작거나 같다.</P><P>다음 줄에는 검색 요청 문자열인 <SPAN class="tex-font-style-tt">&lt;search&gt;</SPAN> 의 개수 $$$M(1&le;M&le;500)$$$이 주어진다. 다음 $$$M$$$개 줄에는 문자열 <SPAN class="tex-font-style-tt">&lt;search&gt;</SPAN>가 한 줄에 한 개씩 주어진다. 문자열 <SPAN class="tex-font-style-tt">&lt;search&gt;</SPAN> 의 길이는 $$$500$$$보다 작거나 같다.</P><P>잘못된 문자열은 입력으로 주어지지 않는다.</P></DIV><P></P><P></P><DIV class="output-specification"><DIV class="section-title">Output</DIV><P></P><P>검색 명령어인 <SPAN class="tex-font-style-tt">&lt;search&gt;</SPAN>에 대한 결과값을 한 줄에 하나씩 출력한다.</P></DIV><P></P><P></P><DIV class="sample-tests"><DIV class="section-title">Example</DIV><P></P><P></P><DIV class="sample-test"><DIV class="input"><DIV class="title">Input</DIV><PRE class="content" data-content="4
Gulivers_Travel Jonathan_Swift novel fairytale
1984 George_Orwell novel SF
Toji Pak_Kyong-ni novel korean
Cosmos Carl_Sagan science cosmology
5
n:Guliver
ni:Guliver
N(ni:Guliver)
a:Pak_Kyong-ni, t:novel
O(A(t:novel, N(t:fairytale)), A(t:fairytale, N(t:novel)))
">
<DIV class="test-example-line test-example-line-even test-example-line-0">4</DIV><DIV class="test-example-line test-example-line-even test-example-line-0">Gulivers_Travel Jonathan_Swift novel fairytale</DIV><DIV class="test-example-line test-example-line-even test-example-line-0">1984 George_Orwell novel SF</DIV><DIV class="test-example-line test-example-line-even test-example-line-0">Toji Pak_Kyong-ni novel korean</DIV><DIV class="test-example-line test-example-line-even test-example-line-0">Cosmos Carl_Sagan science cosmology</DIV><DIV class="test-example-line test-example-line-even test-example-line-0">5</DIV><DIV class="test-example-line test-example-line-even test-example-line-0">n:Guliver</DIV><DIV class="test-example-line test-example-line-even test-example-line-0">ni:Guliver</DIV><DIV class="test-example-line test-example-line-even test-example-line-0">N(ni:Guliver)</DIV><DIV class="test-example-line test-example-line-even test-example-line-0">a:Pak_Kyong-ni, t:novel</DIV><DIV class="test-example-line test-example-line-even test-example-line-0">O(A(t:novel, N(t:fairytale)), A(t:fairytale, N(t:novel)))</DIV></PRE></DIV><DIV class="output"><DIV class="title">Output</DIV><PRE class="content">
0
1
3
1
2
</PRE></DIV></DIV></DIV></DIV><P></P><P>  </P>

</BODY></HTML>
